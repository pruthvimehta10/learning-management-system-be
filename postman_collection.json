{
    "info": {
        "_postman_id": "lms-integration-v2-2026",
        "name": "LMS Integration API - Complete Collection",
        "description": "Complete API documentation for integrating with the Learning Management System. This collection includes all endpoints for authentication, courses, enrollments, quizzes, labs, and video streaming.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "1. Authentication",
            "description": "Endpoints for JWT authentication and user verification",
            "item": [
                {
                    "name": "Verify JWT Token",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}",
                                "description": "JWT token from parent system"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/auth/me",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "me"
                            ]
                        },
                        "description": "Verifies the JWT token and returns user information including role and ID. Use this endpoint to validate tokens before accessing other resources."
                    },
                    "response": []
                },
                {
                    "name": "Generate Test Token (DEV ONLY)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "pm.environment.set(\"client_token\", jsonData.token);",
                                    "pm.test(\"Token generated\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "    pm.expect(jsonData.token).to.not.be.undefined;",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"role\": \"client\",\n    \"sub\": \"user_123\",\n    \"lab_id\": \"lab_001\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/dev/generate-token",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "dev",
                                "generate-token"
                            ]
                        },
                        "description": "DEVELOPMENT ONLY: Generates a test JWT token. In production, tokens should be generated by the parent system."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "2. Courses",
            "description": "Course catalog and details",
            "item": [
                {
                    "name": "Get All Courses",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/courses",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "courses"
                            ]
                        },
                        "description": "Returns all published courses. Use this to display the course catalog in the parent system."
                    },
                    "response": []
                },
                {
                    "name": "Get Course by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/courses/{{course_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "courses",
                                "{{course_id}}"
                            ]
                        },
                        "description": "Returns detailed information about a specific course including topics, videos, and quiz questions."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "3. Enrollments",
            "description": "User course enrollment management",
            "item": [
                {
                    "name": "Enroll User in Course",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"courseId\": \"course-uuid-here\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/enrollments",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "enrollments"
                            ]
                        },
                        "description": "Enrolls the authenticated user in a course. The user ID is extracted from the JWT token."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "4. Categories",
            "description": "Course category management",
            "item": [
                {
                    "name": "Get All Categories",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/categories",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "categories"
                            ]
                        },
                        "description": "Returns all course categories ordered by name."
                    },
                    "response": []
                },
                {
                    "name": "Create Category (Admin Only)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Web Development\",\n    \"description\": \"Learn modern web technologies\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/categories",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "categories"
                            ]
                        },
                        "description": "Creates a new course category. Requires admin role."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "5. Labs",
            "description": "Training lab management for multi-tenant access",
            "item": [
                {
                    "name": "Get All Labs",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/labs",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "labs"
                            ]
                        },
                        "description": "Returns all available training labs."
                    },
                    "response": []
                },
                {
                    "name": "Create Lab (Admin Only)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Tech Lab Alpha\",\n    \"code\": \"LAB001\",\n    \"description\": \"Primary training facility\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/labs",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "labs"
                            ]
                        },
                        "description": "Creates a new lab. Requires admin role."
                    },
                    "response": []
                },
                {
                    "name": "Get Lab by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/labs/{{lab_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "labs",
                                "{{lab_id}}"
                            ]
                        },
                        "description": "Returns details for a specific lab."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "6. Quizzes",
            "description": "Quiz submission and scoring",
            "item": [
                {
                    "name": "Submit Quiz",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"lessonId\": \"topic-uuid-here\",\n    \"isFinalExam\": false,\n    \"timeTaken\": 120,\n    \"answers\": [\n        {\n            \"questionId\": \"question-uuid-1\",\n            \"selectedIndex\": 0,\n            \"isCorrect\": true\n        },\n        {\n            \"questionId\": \"question-uuid-2\",\n            \"selectedIndex\": 2,\n            \"isCorrect\": false\n        }\n    ]\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/quiz/submit",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "quiz",
                                "submit"
                            ]
                        },
                        "description": "Submits quiz answers and calculates score. Returns score percentage and pass/fail status (70% required to pass)."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "7. Video Streaming",
            "description": "Secure video content delivery",
            "item": [
                {
                    "name": "Stream Video",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            },
                            {
                                "key": "Range",
                                "value": "bytes=0-1024",
                                "description": "Optional: For byte-range requests"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/video?url={{video_url}}&topicId={{topic_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "video"
                            ],
                            "query": [
                                {
                                    "key": "url",
                                    "value": "{{video_url}}",
                                    "description": "Full URL of the video file"
                                },
                                {
                                    "key": "topicId",
                                    "value": "{{topic_id}}",
                                    "description": "UUID of the topic/lesson"
                                }
                            ]
                        },
                        "description": "Proxy endpoint for secure video streaming. Supports byte-range requests for seeking. Validates user access to the course before streaming."
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "8. Admin - Role Testing",
            "description": "Test endpoints to verify role-based access control",
            "item": [
                {
                    "name": "Access Admin Page (As Admin) - SHOULD PASS",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "admin"
                            ]
                        },
                        "description": "Test admin access with admin token. Should return 200."
                    },
                    "response": []
                },
                {
                    "name": "Access Admin Page (As Client) - SHOULD FAIL",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 403 Forbidden\", function () {",
                                    "    pm.response.to.have.status(403);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{client_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/admin",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "admin"
                            ]
                        },
                        "description": "Test admin access with client token. Should return 403 Forbidden."
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:3000",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "client_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "course_id",
            "value": "",
            "type": "string",
            "description": "Sample course UUID for testing"
        },
        {
            "key": "topic_id",
            "value": "",
            "type": "string",
            "description": "Sample topic UUID for testing"
        },
        {
            "key": "lab_id",
            "value": "",
            "type": "string",
            "description": "Sample lab UUID for testing"
        },
        {
            "key": "video_url",
            "value": "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
            "type": "string",
            "description": "Sample video URL for testing"
        }
    ]
}